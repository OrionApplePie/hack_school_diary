# Скрипт исправления оценок в электронном школьном дневнике

Скрипт для указанного ученика исправляет плохие оценки на хорошие, удаляет все замечания и добавляет запись похвалы по указанному предмету.

Скрипт можно использовать только имея доступ к Django shell уже развернутого проекта электронного дневника школы. 
Ресурсы для подробного изучения:
- [Исходный код проекта](https://github.com/devmanorg/e-diary/tree/master)
- [Архив с базой данных](https://dvmn.org/filer/canonical/1562234129/166/)

## Использование

Скачайте скрипт `hack_school.py` на сервер электронного дневника и поместите его в корень проекта электронного дневника рядом с файлом `manage.py`:

Листинг командой `ls` должен быть примерно таким:
```s
> ls
__pycache__/  hack_school.py  project/   requirements.txt
datacenter/   manage.py       README.md  
```

Скрипт работает в `Django shell`. Нужно запустить его.

В каталоге куда был загружен скрипт выполните команду:
```s
python manage.py shell
```

После чего запустится интерактивный режим. По умолчанию Django использует интерпретатор [IPython](https://ru.wikipedia.org/wiki/IPython) или [bpython](https://youtu.be/GB_00Whlf4U) если они установлены. При необходимости используйте параметр `-i python`, чтобы запустить shell с обычным интерпретатором Python:
```s
python manage.py shell -i python
```

Чтобы воспользоваться возможностями скрипта нужно подключить его в shell через [import](https://pythonworld.ru/osnovy/rabota-s-modulyami-sozdanie-podklyuchenie-instrukciyami-import-i-from.html).

Для подключения скрипта введите команду:
```python
import hack_school as hs
```

После подключения можно использовать все функции скрипта. Однако проще всего использовать функцию `hack_school_diary` которая сразу исправит все плохие оценки, удалит замечания и напишет похвалу по заданному предмету.

В функцию нужно передать ФИО ученика, год и литеру класса и название предмета. Подробнее о [функциях](https://wombat.org.ua/AByteOfPython/functions.html#id1).

**Внимание: литера класса вводится в русской раскладке и в верхнем регистре!**

Пример ввода:
```python
hs.hack_school_diary(name='Иванов Иван Иванович', year=11, letter='А', subject='Алгебра')
```

Если плохих оценок много, то исправление может занять некоторое время и может показаться что программа "зависла", не пугайтесь, просто подождите.

После выполнения скрипт выведет отчет о работе:
```python
Успешно! Оценок исправлено: 271.
Успешно! Замечаний удалено: 9.
Успешно! Похвала по предмету "Алгебра 11 класса" создана: "Замечательно!".
```

Похвала создается для последнего на момент запуска урока указанного предмета.

Если плохих оценок не было и похвала уже есть, то вывод будет таким:
```python
Плохих оценок не найдено. Изменений не внесено.
Замечания не найдены. Изменений не внесено.
Похвала по предмету "Алгебра 11 класса" на уроке от 2019-05-25 уже есть. Не создается больше одной похвалы на урок.
```

## Обработка ошибок

Скрипт проверяет ввод имени ученика, при пустом имени выведется сообщение: "Ошибка! Введите ФИО ученика.".
Также есть проверка если по заданной строке найдено несколько профилей учеников &mdash; тогда выводится сообщение: "Найдено несколько учеников! Введите ФИО полностью.". Если же профиль не найден, то выводится сообщение: "Не найдено учеников! Проверьте ФИО и попробуйте еще раз."

Если не введено название предмета, то выведется сообщение: "Ошибка! Введите название предмета!". Также проверяется корректность ввода года и литеры класса, при некорректном вводе выведется: "Ошибка! Проверьте номер класса!".

Даже при корректном вводе предмета и класса делается проверка на наличие урока (например, для случая если у заданного класса нет такого предмета). Сообщение если урок по такому предмету и классу не найден следующее: "Ошибка! Урок не найден. Проверьте название урока, год и литеру класса!".

## Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).